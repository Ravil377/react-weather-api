(this["webpackJsonpreact-weather-api"]=this["webpackJsonpreact-weather-api"]||[]).push([[0],{14:function(t,e,n){},15:function(t,e,n){},17:function(t,e,n){},18:function(t,e,n){},19:function(t,e,n){"use strict";n.r(e);var i=n(1),r=n.n(i),a=n(6),c=n.n(a),s=(n(14),n(9)),o=n(2),u=(n(15),n.p+"static/media/settings.4564248b.png"),l=n(0);var d=function(t){var e=t.city,n=e.name,i=e.visibility,r=e.main,a=e.sys,c=e.wind,s=e.weather,o={transform:"rotate(".concat(180+(null===c||void 0===c?void 0:c.deg),"deg)")};return Object(l.jsx)("div",{className:"weather",children:Object(l.jsxs)("ul",{className:"weather__items",children:[Object(l.jsxs)("li",{className:"weather__item",children:[Object(l.jsxs)("h4",{className:"weather__title",children:[n,", ",null===a||void 0===a?void 0:a.country]}),Object(l.jsx)("img",{src:u,alt:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430",className:"weather__setting",onClick:function(){t.isOpenSetting()}})]}),Object(l.jsxs)("li",{className:"weather__item weather__image",children:[Object(l.jsx)("img",{className:"weather__icon",src:"http://openweathermap.org/img/wn/".concat(s&&s[0].icon,"@2x.png"),alt:s&&s[0].description}),Object(l.jsxs)("p",{className:"weather__temperature",children:[Math.floor(null===r||void 0===r?void 0:r.temp),"\xb0C"]})]}),Object(l.jsx)("li",{className:"weather__item",children:Object(l.jsxs)("p",{className:"weather__description",children:["\u041e\u0449\u0443\u0449\u0430\u0435\u0442\u0441\u044f \u043a\u0430\u043a ",Math.floor(null===r||void 0===r?void 0:r.feels_like),"\xb0C. ",s&&s[0].description]})}),Object(l.jsxs)("li",{className:"weather__item",children:[Object(l.jsxs)("div",{className:"weather__wind",children:[Object(l.jsx)("p",{className:"weather__description weather__description-wind-arrow",style:o}),Object(l.jsxs)("p",{className:"weather__description",children:[null===c||void 0===c?void 0:c.speed,"m/s SSE"]})]}),Object(l.jsxs)("p",{className:"weather__description",children:[null===r||void 0===r?void 0:r.pressure,"hPa"]})]}),Object(l.jsxs)("li",{className:"weather__item",children:[Object(l.jsxs)("p",{className:"weather__description",children:["Humidity: ",null===r||void 0===r?void 0:r.humidity,"%"]}),Object(l.jsx)("p",{className:"weather__description",children:"Dew point: 0C"})]}),Object(l.jsx)("li",{className:"weather__item",children:Object(l.jsxs)("p",{className:"weather__description",children:["Visibility: ",Math.floor(i/1e3),".0km"]})})]})})},h=(n(17),n.p+"static/media/hamburger-menu.5ab0a901.svg"),m=n.p+"static/media/loading.6b77aa8a.svg";n(18);var j=function(){return Object(l.jsx)("img",{src:m,alt:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430",className:"loading"})};var b=function(t){var e=r.a.useState(),n=Object(o.a)(e,2),i=n[0],a=n[1],c=t.onDragStart,s=t.onDragEnd,u=t.onDragOver,d=t.onDrop,m=t.isLoading,b=t.isError,g=function(t,e){c(t,e)},f=function(t){s(t)},_=function(t){t.preventDefault(),u(t)},p=function(t,e){t.preventDefault(),d(t,e)};return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"setting",children:[Object(l.jsx)("h4",{className:"setting__title",children:"Settings"}),Object(l.jsx)("button",{type:"button",className:"setting__button-close",onClick:function(){t.isOpenSetting()}}),Object(l.jsx)("ul",{className:"setting__list",children:t.citys.map((function(e){var n=e.id,i=e.name,r=e.sys;return Object(l.jsxs)("li",{className:"setting__list-item",draggable:"true",onDragStart:function(t){return g(t,e)},onDragEnd:function(t){return f(t)},onDragLeave:function(t){return f(t)},onDragOver:function(t){return _(t)},onDrop:function(t){return p(t,e)},children:[Object(l.jsx)("img",{src:h,className:"setting__list-burger",alt:"\u0411\u0443\u0440\u0433\u0435\u0440"}),Object(l.jsxs)("p",{className:"setting__list-city",children:[i,", ",r.country]}),Object(l.jsx)("button",{type:"button",className:"setting__button-remove",onClick:function(){return function(e){t.onClick(e)}(n)}})]},n)}))}),m&&Object(l.jsx)(j,{}),Object(l.jsxs)("div",{className:"setting__form-container",children:[Object(l.jsx)("h4",{className:"setting__title",children:"Add Location:"}),Object(l.jsxs)("form",{name:"addCity",className:"setting__form",onSubmit:function(e){e.preventDefault(),t.onSubmit(i),a("")},children:[Object(l.jsx)("input",{type:"text",name:"city",placeholder:"\u0413\u043e\u0440\u043e\u0434",className:"setting__input ".concat(b&&"setting__input-error"),minLength:"2",maxLength:"40",value:i||"",onChange:function(t){a(t.target.value)},required:!0}),Object(l.jsx)("button",{type:"submit",className:"setting__button-city-enter"})]})]})]})})},g=n(7),f=n(8),_=new(function(){function t(e){Object(g.a)(this,t),this._options=e}return Object(f.a)(t,[{key:"_answerForServer",value:function(t){return t.ok?t.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(t.status))}},{key:"getWeatherByCity",value:function(t){var e=this;return fetch("".concat(this._options.baseUrl,"weather?q=").concat(t,"&appid=").concat(this._options.authorization,"&units=metric&lang=ru")).then((function(t){return e._answerForServer(t)}))}},{key:"getIp",value:function(){var t=this;return fetch("https://ipinfo.io/json?token=6d7db8beb65196").then((function(e){return t._answerForServer(e)}))}}]),t}())({baseUrl:"https://api.openweathermap.org/data/2.5/",authorization:"43a03cf95baf7c1e3256b0f6aa9a38d7"});var p=function(){var t=r.a.useState(!1),e=Object(o.a)(t,2),n=e[0],i=e[1],a=r.a.useState([]),c=Object(o.a)(a,2),u=c[0],h=c[1],m=r.a.useState(),j=Object(o.a)(m,2),g=j[0],f=j[1],p=r.a.useState(!1),O=Object(o.a)(p,2),v=O[0],x=O[1],w=r.a.useState(!1),y=Object(o.a)(w,2),N=y[0],S=y[1];document.addEventListener("DOMContentLoaded",(function(){var t=localStorage.getItem("myWeather");null!==t?(t=JSON.parse(t),h(t)):_.getIp().then((function(t){C(t.city)})).catch((function(t){return i(!0)}))})),window.addEventListener("beforeunload",(function(t){localStorage.removeItem("myWeather"),u.length>0&&localStorage.setItem("myWeather",JSON.stringify(u))}));var D=function(){u.length>0&&x((function(t){return!t}))},k=function(){i(!0),S((function(t){return!t})),setTimeout((function(){return i(!1)}),500)},C=function(t){S((function(t){return!t})),_.getWeatherByCity(t).then((function(t){!function(t){return u.length>0&&u.find((function(e){return e.id===t.id}))}(t)?(h((function(e){return[].concat(Object(s.a)(e),[t])})),S((function(t){return!t}))):k()})).catch((function(t){return k()}))};return Object(l.jsx)(l.Fragment,{children:v&&u?Object(l.jsx)(b,{isOpenSetting:D,onSubmit:C,citys:u,onClick:function(t){return h((function(){return u.filter((function(e){return e.id!==t}))}))},onDragStart:function(t,e){return f(e)},onDragEnd:function(t){return t.target.style.background="#ececec"},onDragOver:function(t){return t.target.style.background="lightblue"},onDrop:function(t,e){h(u.map((function(t){return t.id===e.id?g:t.id===g.id?e:t}))),t.target.style.background="#ececec"},isLoading:N,isError:n}):u.map((function(t){return Object(l.jsx)(d,{isOpenSetting:D,city:t},t.id)}))})},O=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(e){var n=e.getCLS,i=e.getFID,r=e.getFCP,a=e.getLCP,c=e.getTTFB;n(t),i(t),r(t),a(t),c(t)}))};c.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(p,{})}),document.getElementById("root")),O()}},[[19,1,2]]]);
//# sourceMappingURL=main.77263415.chunk.js.map